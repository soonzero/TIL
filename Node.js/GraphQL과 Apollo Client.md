# GraphQL과 Apollo Client

REST API를 제공하는 곳은 엄청 많다.

[냥갱](https://nyang-gang.web.app)에서 이용했던 [공공데이터포털](https://www.data.go.kr), [MPList](https://mplist.netlify.app)에서 이용했던 [Spotify](https://developers.spotify.com),

이번에 사용하려고 계획했었던 [yts.mx](https://yts.mx/api), 그리고 [넷플릭스 클론 코딩](https://github.com/soonzero/netflix)할 때 사용했던 것도 모두 REST API였다.

처음으로 백엔드 개발자와 협업했었던 프로젝트인 넷플릭스 클론 코딩에서 한 가지 아쉬운 점이 있었다.

하나의 api에서 get 요청을 하면 응답으로 제공해주는 데이터들이 투머치하거나,

데이터가 부족해서 페칭을 두 번 이상 했었어야 되는 경우가 있었다.

이걸 해결하기 위해 등장한 것이 GraphQL이라길래, 이걸 꼭 사용해보고 싶었지만 GraphQL을 제공하는 마음에 드는 곳이 없었다.

그래서 직접 (살짝) 만들어서 해보려고 하는데, 그 전에 어느 정도 공부를 해놓아야 할 것 같아서 정리해보려고 한다!

## API(Application Program Interface)

특정 프로그램의 데이터에 다른 프로그램이 접근할 수 있도록 미리 정한 통신 기술이다.

앱에서 사용할 수 있도록 운영체제나 프로그래밍 언어가 제공하는 기능을 제어할 수 있도록 만든 인터페이스를 의미한다.

### REST API

[REST API 문서로 이동](https://github.com/soonzero/TIL/blob/main/프론트엔드/RESTful%20API.md)

    많은 버튼들을 가지고 있는 리모콘과 비슷하다. 리모콘의 버튼들은 앱을 만든 사람의 의도에 따라 노출되어 있다.

    버튼을 누르면 앱은 해당 명령어를 실행하도록 프로그래밍되어있다.

- 조직화 되어있고 이해하기 쉽고 작업이 간편하다.

- URL로 요청을 보낼 수 있기 때문에 브라우저 뿐만 아니라, iOS앱, 안드로이드앱도 API를 호출할 수 있다.

- 사람들이 같은 컨벤션을 사용하므로 예측 가능한 것들이 많다. (복수 명사 사용, 파라미터 사용 방법 등)

#### 한계

여러 환경에 맞춰 API를 제공하는 것이 쉽지 않고, 각 환경에 맞추다 보니 비슷한 역할을 하지만 엔드포인트가 다른 api가 많이 개발될 수도 있다.

- over-fetching: 응답으로 받은 데이터 중 불필요한 것들이 많은 경우로, data 통신이 느려질 수 있고 트래픽 낭비가 발생한다.

- under-fetching: 응답으로 받는 데이터가 부족한 경우로, 필요한 모든 데이터를 얻기 위해 두 개 이상의 url로 요청해야 한다.

## GraphQL

2012년 페이스북 앱에 의해 처음 사용되었고, 2015년 오픈소스가 되었다.

환경에 종속적이지 않기 때문에 iOS, Android와 같은 다른 기종에 대해 별도의 API를 개발할 필요가 없다.

- 필요한 데이터를 선택하여 요청한다. (over-fetching의 문제점을 해결할 수 있다.)

- 한 번의 요청으로 모든 데이터를 받을 수 있다. (under-fetching의 문제점을 해결할 수 있다.)

### 한계

REST API의 한계점을 해결했다고 해서 무조건 GraphQL이 REST API보다 뛰어난 것은 아니다.

아직까지 현업에서는 REST API를 많이 사용하고 있기도 하다.

- 하나의 엔드포인트를 사용하기 때문에 HTTP에 제공하는 캐싱 전략을 그대로 사용하기 어렵다.

- 파일 업로드에 대한 구체적인 구현 방법이 정의되어 있지 않아, 업로드만을 위한 분리된 API를 개발해야 할 수도 있다.

## Apollo Client

Apollo Client는 상태 관리 라이브러리 중 하나로,

GraphQL API에서 데이터를 fetch할 수 있도록 해주고 앱에서 로컬로 상태를 관리할 수 있도록 도와준다.

이전에는 로컬에 있는 상태를 관리하기 위해 라이브러리를 하나 사용하고, data를 fetch하기 위해 다른 라이브러리를 사용했다면

아폴로 클라이언트를 이용하면 서버에 있는 데이터를 불러오는 것과, 로컬에 있는 데이터를 관리하는 것을 모두 할 수 있는 것이다.

이렇게 두 종류의 데이터를 동기화할 수 있다는 점이 Apollo Client의 가장 큰 장점이라고 할 수 있다.

<br />

[Apollo Client 공식 문서로 이동](https://www.apollographql.com/docs/)

**자세한 내용은 나중에 다른 문서로 작성할 예정이다.**
