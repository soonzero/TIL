# `Node.js`, `npm`, `npx`

처음 프로그래밍에 입문하게 되면, 코딩을 시작하기 위한 환경을 만들게 되는데

내가 배우고자 하는 프레임워크와 라이브러리를 설치하기 위해서, 또 뭔가를 설치했어야 했던 게 생각난다.

그 땐 이게 뭔지도 모르고, 일단 해야 하니까 군말 없이 알려준 대로 설치하고 실행했었던 것 같다.

이번에 `Next.js`를 새로 배우기 시작하면서 `npx create-next-app`이라는 코드를 터미널에 입력하고,

제일 최근에는 `Tailwind` 배우려고 `npm install -D tailwindcss postcss autoprefixer` 코드를 입력했다.

그 때 **'왜 이 패키지는 `npm`이고, 저 패키지는 `npx`지? 뭐가 다른걸까? 그리고 `Node.js`가 정확히 뭐지?'** 라는 생각이 문득 들었고,

익숙했었던 `Node.js`, `npm`, `npx`라는 텍스트가 갑자기 너무 생소하게 느껴졌다.

개발자의 길을 걸은 지 나름 반 년이 지났음에도 불구하고 이런 개념들이 제대로 잡히지 않은 상태에서 코드를 짰다는 게 조금 부끄러웠다.

이번 기회에 내가 몰랐던 것들이나, 잘 모르면서 안다고 생각했던 것들을 천천히 되짚어 보고 제대로 공부해야겠다는 생각이 들었다.

<br />

<hr />

### `Node.js`

`Node.js`는 Chrome의 V8이라는 JavaScript 엔진으로 빌드되어 그 엔진 위에서 동작하는 자바스크립트 **런타임**을 의미한다.

- 런타임(runtime): 해당 프로그래밍 언어로 작성된 코드가 구동되는 환경을 말하는데, 브라우저가 대표적인 JS 런타임이다.

JS 코드를 브라우저 내에서 말고도 다른 환경에서도 쉽게 실행할 수 있도록 도와주는 자바스크립트 실행기라고 볼 수 있다.

아래 두 가지 방식으로 자바스크립트 런타임을 제공하는데

- REPL(Read, Evaluate, Print, Loop): 사용자의 입력(Read)을 받아 그 코드를 평가(Evaluate) 및 실행하고, 그 결과를 화면에 출력(Print)해주는 작업을 반복(Loop)한다. 이는 윈도우 기반의 cmd와 리눅스 기반의 Terminal에서 사용된다.

- JS로 작성된 소스 파일을 직접 실행할 수 있다. REPL로 한 줄 한 줄 읽어서 실행한 것과 동일하다.

`Node.js`는 JS 코드가 구동될 수 있는 환경 그 자체이고, 백엔드 앱과 프론트엔드 개발도 가능하다.

- 예시로 create-react-app이나 babel, webpack 등이 Node.js 환경에서 실행되는 대표적인 프로그램이다.

<br />

<hr />

### `npm` (node package manager)

`Node.js`의 의존성과 패키지들을 쉽게 설치하거나 관리할 수 있도록 돕는 프로그램으로, `Node.js` 설치 시 함께 설치된다.

패키지를 실행시킬 수는 없기 때문에 npm을 사용해서 패키지를 실행하려면 `package.json` 파일에서 해당 패키지를 지정해야 한다.

- `package.json`

  - 프로젝트의 정보 및 기타 실행 스크립트를 작성하는 파일로, npm을 통해 설치된 패키지 목록을 관리한다.

- `dependencies`: 실제 코드에도 포함되며, 앱 구동을 위해 필요한 의존성 파일들 리스트

- `devDependencies`: 실제 코드에는 포함되지 않으며 운영이 아닌 개발 시에만 필요한 의존성 파일들 리스트

<br />

`npm`에는 단점이 몇 가지 있다.

- 이전에 설치했던 패키지를 그대로 사용하기 때문에 사용자가 직접 최신 버전으로 재설치하지 않는 이상 모듈의 업데이트 여부 확인이 어렵다.

- 여러 가지 프로젝트를 운영 중일 때 업데이트 진행 시 변동사항이 생겨 각각 프로젝트에 영향을 끼칠 수 있다.

- CRA와 같은 업데이트가 잦은 보일러 플레이트에는 특히나 치명적이다.

위 세 가지 오류를 해결하기 위해 탄생한 것이 바로 `npx`다.

<br />

<hr />

#### + 자주 사용되는 플래그

`npm install` 뒤에 붙는 `--save-dev`나 `-g`, `-D` 등의 접미어를 플래그라고 한다.

특정 패키지를 설치하는 것은 크게 두 가지 옵션으로 구분되는데,

1. 프로젝트 구동 시 필요한 `dependencies` 목록에 추가

   - `npm install (패키지명)`
   - `npm install -P (패키지명)`
   - `npm install --save-prod (패키지명)`
   - 위 세 개는 완전히 동일하다.

2. 개발 단계에서만 필요한 `devDependencies` 목록에 추가

   - `npm install -D (패키지명)`
   - `npm install --save-dev (패키지명)`
   - 위 두 개는 완전히 동일하다.

- `-g`, `--global`

  - `npm install (패키지명)`은 프로젝트 폴더에 패키지를 설치했다면, `-g` 플래그를 통해 패키지를 설치하면, 로컬 시스템 폴더에 패키지를 설치한다.

  - 이 플래그를 사용할 경우 `package.json`의 의존성 목록에 기록되지 않는다.

<hr />

### `npx` (execute npm package binaries)

`npm` 5.2.0 버전 이후부터 기본 패키지로 제공되기 시작했으며, 모듈의 일종이다.

이전까지는 패키지를 사용하려면 로컬에 꼭 설치했어야 했지만 `npx`의 등장 이후로는 패키지의 최신 버전을 임시로 불러와 실행시킬 수 있게 되었다.

따라서 사용자가 현재 어떤 버전을 사용하고 있는지 굳이 신경을 쓰지 않아도 되고, 저장 공간도 절약할 수 있을 뿐만 아니라, 유지보수 측면에서도 한결 나아졌다.

<br />

<hr />

지금까지 너무 무지성으로 패키지를 설치했었던 게 아닌가 하는 반성을 하게 된다.

아직 내가 깊은 부분까지 공부하지 못해서 그런 건지는 잘 모르겠지만, 패키지의 버전 관련한 오류를 접한 적은 **다행히 아직까지는** 없었다.

그래도 이렇게 정리하고 나니 조금 윤곽이 제대로 잡힌 것 같아서, 추후에 오류가 발생했을 때 수월하게 방법을 찾을 수 있을 것 같다!
