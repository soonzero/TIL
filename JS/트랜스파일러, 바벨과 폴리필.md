# 트랜스파일러, 바벨과 폴리필

자바스크립트는 지속적으로 업데이트되고 있는 언어이고,

브라우저마다 자바스크립트를 실행하는 엔진이 다르기 때문에 똑같은 코드도 모든 브라우저에서 정상적으로 작동하지 않을 수 있다.

- Chrome(크롬): V8

- Safari(사파리): JavaScript Core

- Firefox(파이어폭스): SpiderMonkey(스파이더 몽키)

- Edge(엣지): Chakra(차크라)

## 트랜스파일러(Transpiler)

    컴파일러란, 사람이 이해할 수 있는 고수준 언어에서 컴퓨터가 이해하고 실행할 수 있는 저수준 언어로 변환해주는 것을 말한다.

트랜스파일러는 컴파일러처럼 언어를 또 다른 언어가 아닌, 같은 언어로 변환하지만 문법적인 부분만 변경한다.

대표적으로 `Babel`과 `TypeScript`, `Sass` 등이 있다.

자바스크립트 언어로의 개발부터 실행까지 순서는 다음과 같다고 할 수 있다.

    개발자 > 고수준 언어 > 트랜스파일 > 컴파일 > 저수준 언어 > 컴퓨터

## `바벨(Babel)`과 `폴리필`

ECMAScript 명세서를 보다 보면, 특정 문법을 브라우저에서 지원하지 않는 경우가 있다.

이럴 때 사용하는 것이 트랜스파일러인 `바벨(Babel)`이다. (IE의 경우 폴리필)

### `바벨`

바벨은 ES6 이상의 코드를 브라우저가 이해할 수 있도록 ES5 코드로 변환해준다.

이 작업은 개발자의 컴퓨터에서만 이루어지기 때문에, 바벨 프리셋\*을 설치할 때에는 `-D`나 `--save-dev` 플래그를 붙여서 설치한다.

- 프리셋: 목적에 맞게 코드를 모아놓은 하나의 세트

따라서 사용자는 바벨을 통해 변경된 상태의 코드를 웹사이트 형태로 이용하게 된다.

바벨은 프로젝트 빌드 시 `웹팩(Webpack)`과 같은 빌드 시스템과 함꼐 동작시키는 게 보편적인 사용 방법이다.

웹팩에서는 `babel-loader` 모듈로 바벨의 프리셋들을 지정할 수 있다.

#### 자주 사용되는 바벨의 프리셋

- `preset-env`: ES6을 ES5로 변환

- `preset-react`: react를 변환

- `preset-typescript`: typescript를 변환

- `preset-flow`: flow를 변환

- `babel/core`: 코드의 파싱이나 출력만을 담당

이에 대한 예시로 `@babel/preset-env`에 포함된 `@babel/plugin-transform-arrow-functions`라는 프리셋이 있다.

위 프리셋은 이름 그대로 화살표 함수(arrow functions)를 ES5 형태로 변환시켜준다.

이렇게 필요한 기능들의 프리셋만 설치해서 사용할 수 있다는 장점이 있다.

### `폴리필(Polyfill)`

폴리필은 IE와 같은 구형 브라우저에서 지원하지 않는 기능을 제공하는 코드 모음을 말한다.

IE와 같은 구형 브라우저는 ES6을 지원하지 않는데, ES6 이상 버전에만 존재하는 Promise와 같은 코드는 폴리필을 추가해야 한다.

그렇지 않으면 바벨을 이용해 트랜스파일링을 하더라도 IE는 이를 이해할 수 없다.

#### 자주 사용되는 폴리필

- `core js`: 다양한 폴리필을 제공하며, 특정 기능의 폴리필만 사용하는 것도 가능

- `pollyfill.io`: 기능이나 사용자의 브라우저에 따라 폴리필 스크립트를 제공해주는 서비스
